# üéØ –ù–ê–ß–ù–ò–¢–ï –ó–î–ï–°–¨

**–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è vending-admin-v2 –Ω–∞ —Å–µ—Ä–≤–µ—Ä**

---

## üìã –ë—ã—Å—Ç—Ä—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (5-10 –º–∏–Ω—É—Ç)
### –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (5 –º–∏–Ω—É—Ç)
### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã (2 –º–∏–Ω—É—Ç—ã)

**–û–±—â–µ–µ –≤—Ä–µ–º—è: ~15-20 –º–∏–Ω—É—Ç**

---

## üßπ –®–ê–ì 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh your-server

# 2. –°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏
cd /tmp
wget https://raw.githubusercontent.com/geodez/vending-admin-v2/main/cleanup_server.sh
chmod +x cleanup_server.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É
sudo ./cleanup_server.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –±—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–π –ë–î
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –£–¥–∞–ª–∏—Ç `/opt/vending-git`
- ‚úÖ –û—Å–≤–æ–±–æ–¥–∏—Ç –ø–æ—Ä—Ç—ã 8000 –∏ 5432
- ‚úÖ –û—á–∏—Å—Ç–∏—Ç Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [SERVER_PREPARATION.md](./SERVER_PREPARATION.md)

---

## üöÄ –®–ê–ì 2: –î–µ–ø–ª–æ–π –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /opt
sudo git clone https://github.com/geodez/vending-admin-v2.git
cd vending-admin-v2/backend

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env
sudo cp .env.example .env
sudo nano .env
```

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env:

```env
# 1. Telegram Bot Token (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_@BotFather

# 2. JWT Secret (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=–≤–∞—à_–¥–ª–∏–Ω–Ω—ã–π_—Å–ª—É—á–∞–π–Ω—ã–π_–∫–ª—é—á

# 3. –û—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π:

```bash
# 3. –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
sudo chmod +x deploy.sh

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
sudo ./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL –∏ FastAPI
- ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Owner (ID: 602720033)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ä–∞–±–æ—Ç—É API

---

## ‚úÖ –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl http://localhost:8000/health

# –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
# {"status":"healthy"}

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
sudo docker-compose exec db psql -U vending -d vending -c "SELECT * FROM users;"

# –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID 602720033

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://your-server-ip:8000/docs
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à Backend –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ:

- **API Health Check:** http://your-server:8000/health
- **API Docs (Swagger):** http://your-server:8000/docs
- **API Docs (ReDoc):** http://your-server:8000/redoc

### –í–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:

- **Telegram User ID:** 602720033
- **–†–æ–ª—å:** Owner (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)
- **–°–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚úÖ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[SERVER_PREPARATION.md](./SERVER_PREPARATION.md)** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- **[QUICK_DEPLOY.md](./QUICK_DEPLOY.md)** ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π
- **[backend/DEPLOY.md](./backend/DEPLOY.md)** ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è (Docker + systemd)
- **[backend/README.md](./backend/README.md)** ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Backend

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–≥–∏
```bash
cd /opt/vending-admin-v2/backend
sudo docker-compose logs -f app
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
cd /opt/vending-admin-v2/backend
sudo docker-compose restart app
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
cd /opt/vending-admin-v2/backend
sudo docker-compose down
```

### –ó–∞–ø—É—Å–∫ –∑–∞–Ω–æ–≤–æ
```bash
cd /opt/vending-admin-v2/backend
sudo docker-compose up -d
```

---

## üîê –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å TELEGRAM_BOT_TOKEN

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω
6. –í—Å—Ç–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

### API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
cd /opt/vending-admin-v2/backend
sudo docker-compose logs app
sudo docker-compose ps
```

### –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

```bash
sudo lsof -i :8000
sudo lsof -i :5432

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker

```bash
sudo systemctl status docker
sudo systemctl start docker
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞–ª–∞—Å—å

```bash
cd /opt/vending-admin-v2/backend
sudo docker-compose down -v
sudo docker-compose up -d
sudo docker-compose exec app alembic upgrade head
```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è Backend:

1. ‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 8000
2. ‚úÖ –í–∞—à Owner –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω (602720033)
3. üîú **–°–æ–∑–¥–∞—Ç—å Frontend** (React + Telegram Mini App)
4. üîú **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Telegram Bot** –¥–ª—è Mini App
5. üîú **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è production)

---

## üîó GitHub

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/geodez/vending-admin-v2

---

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤—ã—à–µ** üöÄ
