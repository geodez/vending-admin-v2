# ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–∞—Ç–∞:** 2026-01-25  
**–í–µ—Ç–∫–∞:** `test/improvement-plan-implementation`  
**–ö–æ–º–º–∏—Ç:** `0dd902c`

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è

### Backend
- ‚úÖ –í–µ—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: `{"status":"healthy"}`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –í—Å–µ endpoints –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ OpenAPI

### Frontend
- ‚úÖ API prefix check –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Frontend —Å–æ–±—Ä–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è `/api/v1/api/v1`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö endpoints

–í—Å–µ 8 –Ω–æ–≤—ã—Ö endpoints –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã:

1. ‚úÖ `/api/v1/analytics/sales/summary` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
2. ‚úÖ `/api/v1/analytics/sales/margin` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
3. ‚úÖ `/api/v1/analytics/owner-report/daily` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
4. ‚úÖ `/api/v1/analytics/owner-report/issues` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
5. ‚úÖ `/api/v1/expenses/analytics` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
6. ‚úÖ `/api/v1/expenses/categories` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
7. ‚úÖ `/api/v1/mapping/button-matrices/{matrix_id}/items/batch` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
8. ‚úÖ `/api/v1/mapping/button-matrices/{matrix_id}/clone` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `"Not authenticated"` –≤–º–µ—Å—Ç–æ `404`, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏

- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç (`/api/v1/analytics/overview`)
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–∞–¥–∞–µ—Ç
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏:

1. **–ü–æ–ª—É—á–∏—Ç—å JWT —Ç–æ–∫–µ–Ω:**
   - –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
   - –í–∑—è—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ Local Storage

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   ssh vending-prod
   cd /opt/vending-admin-v2
   ./test_new_endpoints.sh <JWT_TOKEN>
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Playwright:**
   - –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–µ—Å–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã)

### –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
git checkout main
git merge test/improvement-plan-implementation
git push origin main

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/vending-admin-v2
git checkout main
git pull origin main
cd backend
docker compose -f docker-compose.prod.yml up -d --build app
cd ../frontend
npm ci && npm run build
```

---

## ‚úÖ –í—ã–≤–æ–¥—ã

1. **–î–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω** ‚úÖ
2. **–í—Å–µ endpoints –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã** ‚úÖ
3. **–†–µ–≥—Ä–µ—Å—Å–∏–∏ –Ω–µ—Ç** ‚úÖ
4. **–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é** ‚úÖ

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º—É merge –≤ main!** üöÄ
